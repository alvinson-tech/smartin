<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SMARTIN</title>
    <link rel="icon" type="image/png" href="flaticon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="header-content">
                <h1>SMARTIN</h1>
                <div class="user-info">
                    <div class="user-profile-container">
                        <span id="studentName" class="user-name-clickable">Loading...</span>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-item"><strong id="dropdownName">Loading...</strong></div>
                            <div class="user-dropdown-item" id="dropdownUSN">Loading...</div>
                            <div class="user-dropdown-item" id="dropdownSemester">Loading...</div>
                            <div class="user-dropdown-item" id="dropdownCollege">Loading...</div>
                        </div>
                    </div>
                    <button id="fingerprintManageBtn" class="btn-fingerprint-manage" title="Manage Fingerprint Login">
                        <svg class="fingerprint-icon-small" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.10008 21.221C6.71021 19.2375 5.89258 16.8243 5.89258 14.2187C5.89258 10.8443 8.6265 8.10938 11.9989 8.10938C15.3712 8.10938 18.1051 10.8443 18.1051 14.2187" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18.4359 20.3118C18.3259 20.3179 18.218 20.3281 18.107 20.3281C14.7347 20.3281 12.0007 17.5931 12.0007 14.2188" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.2694 21.9999C10.675 20.382 8.94705 17.5024 8.94705 14.2187C8.94705 12.5315 10.3145 11.164 12.0007 11.164C13.6869 11.164 15.0543 12.5315 15.0543 14.2187C15.0543 15.9059 16.4218 17.2733 18.108 17.2733C19.7942 17.2733 21.1616 15.9059 21.1616 14.2187C21.1616 9.1571 17.0602 5.05469 12.0017 5.05469C6.94319 5.05469 2.8418 9.1571 2.8418 14.2187C2.8418 15.3469 2.96806 16.4455 3.20021 17.5045" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M20.5257 5.86313C18.4435 3.4978 15.399 2 12.0002 2C8.60136 2 5.55687 3.4978 3.47461 5.86313" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button id="logoutBtn" class="btn-logout">Logout</button>
                </div>
            </div>
        </header>

        <main class="dashboard-main">
            <!-- Tab Navigation -->
            <div class="dashboard-tabs">
                <h1 class="tab-heading active" data-tab="attendance">ATTENDANCE</h1>
                <span class="tab-separator">|</span>
                <h1 class="tab-heading" data-tab="marks">MARKS</h1>
            </div>
            
            <!-- Attendance Tab Content -->
            <div class="tab-section active" id="attendance-section">
                <div class="attendance-content">
                    <aside class="overall-attendance-sidebar">
                        <div class="attendance-circle-container">
                            <h2>Overall Percentage</h2>
                            <div class="attendance-circle">
                                <svg class="progress-ring" width="240" height="240">
                                    <circle class="progress-ring-circle-bg" stroke="#2d2d2d" stroke-width="10" fill="transparent" r="110" cx="120" cy="120"/>
                                    <circle class="progress-ring-circle" stroke="#4a9eff" stroke-width="10" fill="transparent" r="110" cx="120" cy="120" id="progressCircle"/>
                                </svg>
                                <div class="percentage" id="overallPercentage">0%</div>
                            </div>
                        </div>
                        
                        <!-- Mini Calendar -->
                        <div class="mini-calendar">
                            <div class="calendar-header">
                                <button class="calendar-nav" id="prevMonth">&lt;</button>
                                <div class="calendar-month" id="calendarMonth">January 2026</div>
                                <button class="calendar-nav" id="nextMonth">&gt;</button>
                            </div>
                            <div class="calendar-weekdays">
                                <div class="weekday">S</div>
                                <div class="weekday">M</div>
                                <div class="weekday">T</div>
                                <div class="weekday">W</div>
                                <div class="weekday">T</div>
                                <div class="weekday">F</div>
                                <div class="weekday">S</div>
                            </div>
                            <div class="calendar-days" id="calendarDays">
                                <!-- Days will be generated by JavaScript -->
                            </div>
                            
                            <!-- Calendar Help Section -->
                            <div class="calendar-help">
                                <div class="calendar-help-toggle" id="calendarHelpToggle">
                                    <span>Confused?</span>
                                    <svg class="help-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                                        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="calendar-help-content" id="calendarHelpContent">
                                    <h4>How Calendar Selection Works:</h4>
                                    <ul>
                                        <li><strong>Select a Date:</strong> Click on any date (today or previous) to select it. The selected date will have a blue outline.</li>
                                        <li><strong>Mark Attendance:</strong> After selecting a date, click P (Present) or A (Absent) on any subject to mark attendance for that selected date.</li>
                                        <li><strong>View Details:</strong> Click the selected date again to view already marked attendance for that day.</li>
                                    </ul>
                                    <div class="calendar-help-warning">
                                        <strong>⚠️ Important:</strong> Always check which date is selected (blue outline) before marking attendance. If you need to return to today's date, refresh the page.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <section class="subjects-section">
                        <div class="subjects-list" id="subjectsGrid">
                            <!-- Subjects will be loaded here dynamically -->
                        </div>
                    </section>
                </div>
            </div>
            
            <!-- Marks Tab Content -->
            <div class="tab-section" id="marks-section">
                <div class="marks-content">
                    <div class="marks-grid" id="marksGrid">
                        <!-- Marks cards will be loaded here dynamically -->
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-datetime" id="footerDateTime">
                <!-- Date and time will be updated by JavaScript -->
            </div>
            <div class="footer-link">
                <a href="https://alvinunleashed.live" target="_blank" rel="noopener noreferrer">alvinunleashed.live</a>
            </div>
        </footer>
    </div>

    <!-- Attendance Details Modal -->
    <div class="modal" id="attendanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Attendance Details</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Attendance details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Subject Attendance Dates Modal -->
    <div class="modal" id="subjectDatesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="subjectDatesModalTitle">Subject Attendance History</h3>
                <button class="modal-close" id="closeSubjectDatesModal">&times;</button>
            </div>
            <div class="modal-body" id="subjectDatesModalBody">
                <!-- Subject attendance dates will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Fingerprint Registration Prompt Modal -->
    <div class="modal" id="fingerprintPromptModal">
        <div class="modal-content fingerprint-modal">
            <div class="modal-header">
                <h3>Enable 1-Tap Login</h3>
                <button class="modal-close" id="closeFingerprintPrompt">&times;</button>
            </div>
            <div class="modal-body fingerprint-modal-body">
                <div class="fingerprint-icon-large">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.10008 21.221C6.71021 19.2375 5.89258 16.8243 5.89258 14.2187C5.89258 10.8443 8.6265 8.10938 11.9989 8.10938C15.3712 8.10938 18.1051 10.8443 18.1051 14.2187" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M18.4359 20.3118C18.3259 20.3179 18.218 20.3281 18.107 20.3281C14.7347 20.3281 12.0007 17.5931 12.0007 14.2188" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13.2694 21.9999C10.675 20.382 8.94705 17.5024 8.94705 14.2187C8.94705 12.5315 10.3145 11.164 12.0007 11.164C13.6869 11.164 15.0543 12.5315 15.0543 14.2187C15.0543 15.9059 16.4218 17.2733 18.108 17.2733C19.7942 17.2733 21.1616 15.9059 21.1616 14.2187C21.1616 9.1571 17.0602 5.05469 12.0017 5.05469C6.94319 5.05469 2.8418 9.1571 2.8418 14.2187C2.8418 15.3469 2.96806 16.4455 3.20021 17.5045" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.5257 5.86313C18.4435 3.4978 15.399 2 12.0002 2C8.60136 2 5.55687 3.4978 3.47461 5.86313" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <p class="fingerprint-description">
                    Speed up your login with fingerprint or face recognition. 
                    Next time, just tap to login instantly!
                </p>
                <div class="fingerprint-buttons">
                    <button id="enableFingerprintBtn" class="btn-enable-fingerprint">Enable 1-Tap Login</button>
                    <button id="skipFingerprintBtn" class="btn-skip-fingerprint">Maybe Later</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Fingerprint Management Modal -->
    <div class="modal" id="fingerprintManageModal">
        <div class="modal-content fingerprint-modal">
            <div class="modal-header">
                <h3>Manage Fingerprint Login</h3>
                <button class="modal-close" id="closeFingerprintManage">&times;</button>
            </div>
            <div class="modal-body fingerprint-modal-body">
                <div class="fingerprint-credentials-list" id="fingerprintCredentialsList">
                    <!-- Credentials will be loaded here -->
                </div>
                <button id="addNewFingerprintBtn" class="btn-add-fingerprint">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add New Fingerprint
                </button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
